import{g as S,u as x,D as w,c as m,a as _,o as c,b as i,d as t,t as C,F as h,x as y,e as p,w as d,q as E,B as M,y as N,z as k,n as u}from"./vendor.87dfeb6d.js";import{p as v}from"./ProjectsService.8bd127c2.js";import{_ as B,s as j,l,P as n,r as H,A as f,n as L}from"./index.cdd866bf.js";const V={name:"Projects",setup(){const r=S({}),e=x();return w(async()=>{if(e.params.id){try{await v.getProjectById(e.params.id)}catch(s){l.error(s),n.toast(s.message)}try{await j.getSprints(e.params.id)}catch(s){l.error(s),n.toast(s.message)}try{await L.getNotes(e.params.id)}catch(s){l.error(s),n.toast(s.message)}try{await v.getAllOtherProjects()}catch(s){l.error(s),n.toast(s.message)}}}),{editable:r,async createSprint(){try{await j.createSprint(e.params.id,r.value)}catch(s){l.error(s),n.toast(s.message)}},async deleteProject(){try{await n.confirm()&&(await v.deleteProject(e.params.id),H.push({name:"Home",path:"/"}))}catch(s){l.error(s),n.toast(s.message)}},projects:m(()=>f.projects),sprints:m(()=>f.sprints),account:m(()=>f.account),otherProjects:m(()=>f.otherProjects)}}},A={class:"container-fluid"},D={class:"row p-5 mx-2"},F={class:"col-12"},I=t("div",{class:"row mb-3"},[t("i",{"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasExample",title:"Change project",class:"col-1 fs-1 text-primary mdi mdi-application hoverable"})],-1),T={class:"bg-light row d-flex justify-content-around p-5 shadow rounded"},q={class:"fs-3 border-bottom border-primary text-primary col-8"},z=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#sprintModal",class:"col-2 hoverable btn btn-success"}," + Sprint ",-1),O=u("Create Sprint"),R={class:"p-2"},U={class:"d-flex justify-content-end"},G={class:"row d-flex justify-content-start"},J={class:"col-3 p-2"},K={key:0,class:"rounded-circle btn-secondary"},Q=u("Edit Project"),W=t("div",{class:"p-2"},[t("input",{class:"col-12 p-2 rounded",type:"text",placeholder:"Project Name"})],-1),X=t("div",{class:"d-flex justify-content-end"},[t("button",{type:"button",class:"btn btn-success","data-bs-dismiss":"modal"}," Save Changes ")],-1),Y=[W,X],Z=u("Edit Project"),$=t("div",{class:"p-2"},[t("input",{class:"col-12 p-2 rounded",type:"text",placeholder:"Project Name"})],-1),tt=t("div",{class:"d-flex justify-content-end"},[t("button",{type:"button",class:"btn btn-success","data-bs-dismiss":"modal"}," Save Changes ")],-1),et=[$,tt],st={class:"offcanvas bg-secondary offcanvas-start",tabindex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel"},ot=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"}," Change Project "),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),at={class:"offcanvas-body"},rt={class:"dropdown mt-3"};function nt(r,e,s,a,ct,it){const g=_("Sprint"),b=_("Modal"),P=_("ProjectList");return c(),i("div",A,[t("div",D,[t("div",F,[I,t("div",T,[t("b",q,C(a.projects.name),1),z,(c(!0),i(h,null,y(a.sprints,o=>(c(),i("div",{key:o.id},[p(g,{sprint:o},null,8,["sprint"])]))),128)),p(b,{id:"sprintModal"},{title:d(()=>[O]),body:d(()=>[t("form",{onSubmit:e[2]||(e[2]=M((...o)=>a.createSprint&&a.createSprint(...o),["prevent"])),class:"row"},[t("div",R,[N(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>a.editable.name=o),class:"col-12 p-2 rounded",type:"text",placeholder:"Sprint Name"},null,512),[[k,a.editable.name]])]),t("div",U,[t("button",{onClick:e[1]||(e[1]=(...o)=>a.createSprint&&a.createSprint(...o)),type:"button",class:"btn btn-success","data-bs-dismiss":"modal"}," Create Sprint ")])],32)]),_:1}),t("div",G,[t("div",J,[a.account.id==a.projects.creatorId?(c(),i("button",K,[t("i",{onClick:e[3]||(e[3]=(...o)=>a.deleteProject&&a.deleteProject(...o)),title:"delete project",class:"mdi fs-5 col-2 hoverable text-end mdi-delete"})])):E("",!0)])])]),p(b,{id:"settingsModal"},{title:d(()=>[Q]),body:d(()=>[t("form",{onSubmit:e[4]||(e[4]=(...o)=>r.functionHere&&r.functionHere(...o)),class:"row"},Y,32)]),_:1}),p(b,{id:"settingsModal"},{title:d(()=>[Z]),body:d(()=>[t("form",{onSubmit:e[5]||(e[5]=(...o)=>r.functionHere&&r.functionHere(...o)),class:"row"},et,32)]),_:1}),t("div",st,[ot,t("div",at,[t("div",rt,[t("ul",null,[(c(!0),i(h,null,y(a.otherProjects,o=>(c(),i("div",{key:o.id},[p(P,{project:o},null,8,["project"])]))),128))])])])])])])])}var mt=B(V,[["render",nt]]);export{mt as default};
